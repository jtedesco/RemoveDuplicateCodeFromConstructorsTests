<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Remove Duplicate Code From Constructors Refactoring (Test Suite): /media/Documents/Documents/Dropbox/16 - College - Senior/CS 427 - Software Engineering I/edu.illinois.canistelCassabanana.tests/src/org/eclipse/jdt/ui/tests/refactoring/infra/JavaProjectHelper.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Remove Duplicate Code From Constructors Refactoring (Test Suite)</div>
   <div id="projectbrief">An Eclipse Java refactoring to remove duplicate field assignments from constructors in a class. (Test Suite)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('JavaProjectHelper_8java.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>/media/Documents/Documents/Dropbox/16 - College - Senior/CS 427 - Software Engineering I/edu.illinois.canistelCassabanana.tests/src/org/eclipse/jdt/ui/tests/refactoring/infra/JavaProjectHelper.java</h1>  </div>
</div>
<div class="contents">
<a href="JavaProjectHelper_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2000, 2007 IBM Corporation and others.</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved. This program and the accompanying materials</span>
<a name="l00004"></a>00004 <span class="comment"> * are made available under the terms of the Eclipse Public License v1.0</span>
<a name="l00005"></a>00005 <span class="comment"> * which accompanies this distribution, and is available at</span>
<a name="l00006"></a>00006 <span class="comment"> * http://www.eclipse.org/legal/epl-v10.html</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Contributors:</span>
<a name="l00009"></a>00009 <span class="comment"> *     IBM Corporation - initial API and implementation</span>
<a name="l00010"></a>00010 <span class="comment"> *******************************************************************************/</span>
<a name="l00011"></a>00011 <span class="keyword">package </span>org.eclipse.jdt.ui.tests.refactoring.infra;
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="keyword">import</span> java.io.File;
<a name="l00014"></a>00014 <span class="keyword">import</span> java.io.FileInputStream;
<a name="l00015"></a>00015 <span class="keyword">import</span> java.io.IOException;
<a name="l00016"></a>00016 <span class="keyword">import</span> java.io.InputStream;
<a name="l00017"></a>00017 <span class="keyword">import</span> java.lang.reflect.InvocationTargetException;
<a name="l00018"></a>00018 <span class="keyword">import</span> java.net.URL;
<a name="l00019"></a>00019 <span class="keyword">import</span> java.util.ArrayList;
<a name="l00020"></a>00020 <span class="keyword">import</span> java.util.Enumeration;
<a name="l00021"></a>00021 <span class="keyword">import</span> java.util.Map;
<a name="l00022"></a>00022 <span class="keyword">import</span> java.util.zip.ZipFile;
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">import</span> junit.framework.Assert;
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="keyword">import</span> org.eclipse.core.runtime.CoreException;
<a name="l00028"></a>00028 <span class="keyword">import</span> org.eclipse.core.runtime.IPath;
<a name="l00029"></a>00029 <span class="keyword">import</span> org.eclipse.core.runtime.IProgressMonitor;
<a name="l00030"></a>00030 <span class="keyword">import</span> org.eclipse.core.runtime.Path;
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="keyword">import</span> org.eclipse.core.resources.IContainer;
<a name="l00033"></a>00033 <span class="keyword">import</span> org.eclipse.core.resources.IFile;
<a name="l00034"></a>00034 <span class="keyword">import</span> org.eclipse.core.resources.IFolder;
<a name="l00035"></a>00035 <span class="keyword">import</span> org.eclipse.core.resources.IProject;
<a name="l00036"></a>00036 <span class="keyword">import</span> org.eclipse.core.resources.IProjectDescription;
<a name="l00037"></a>00037 <span class="keyword">import</span> org.eclipse.core.resources.IResource;
<a name="l00038"></a>00038 <span class="keyword">import</span> org.eclipse.core.resources.IWorkspace;
<a name="l00039"></a>00039 <span class="keyword">import</span> org.eclipse.core.resources.IWorkspaceDescription;
<a name="l00040"></a>00040 <span class="keyword">import</span> org.eclipse.core.resources.IWorkspaceRoot;
<a name="l00041"></a>00041 <span class="keyword">import</span> org.eclipse.core.resources.IWorkspaceRunnable;
<a name="l00042"></a>00042 <span class="keyword">import</span> org.eclipse.core.resources.ResourcesPlugin;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">import</span> org.eclipse.ui.dialogs.IOverwriteQuery;
<a name="l00045"></a>00045 <span class="comment">//import org.eclipse.ui.wizards.datatransfer.ImportOperation;</span>
<a name="l00046"></a>00046 <span class="comment">//import org.eclipse.ui.wizards.datatransfer.ZipFileStructureProvider;</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="keyword">import</span> org.eclipse.jdt.core.IClasspathEntry;
<a name="l00049"></a>00049 <span class="keyword">import</span> org.eclipse.jdt.core.IJavaElement;
<a name="l00050"></a>00050 <span class="keyword">import</span> org.eclipse.jdt.core.IJavaProject;
<a name="l00051"></a>00051 <span class="keyword">import</span> org.eclipse.jdt.core.IPackageFragmentRoot;
<a name="l00052"></a>00052 <span class="keyword">import</span> org.eclipse.jdt.core.JavaCore;
<a name="l00053"></a>00053 <span class="keyword">import</span> org.eclipse.jdt.core.JavaModelException;
<a name="l00054"></a>00054 <span class="keyword">import</span> org.eclipse.jdt.core.search.IJavaSearchConstants;
<a name="l00055"></a>00055 <span class="keyword">import</span> org.eclipse.jdt.core.search.SearchEngine;
<a name="l00056"></a>00056 <span class="keyword">import</span> org.eclipse.jdt.core.search.SearchPattern;
<a name="l00057"></a>00057 <span class="keyword">import</span> org.eclipse.jdt.core.search.TypeNameRequestor;
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="keyword">import</span> org.eclipse.jdt.internal.ui.JavaPlugin;
<a name="l00060"></a>00060 <span class="keyword">import</span> org.eclipse.jdt.internal.ui.util.CoreUtility;
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="keyword">import</span> edu.illinois.canistelCassabanana.tests.Activator;
<a name="l00063"></a>00063 
<a name="l00067"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html">00067</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html">JavaProjectHelper</a> {
<a name="l00068"></a>00068      
<a name="l00073"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a25c1dc7863be515c696975db13e6908e">00073</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> IPath <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a25c1dc7863be515c696975db13e6908e">RT_STUBS_13</a>= <span class="keyword">new</span> Path(<span class="stringliteral">&quot;testresources/rtstubs.jar&quot;</span>);
<a name="l00078"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af51571e2c282dc955d763c8aa6d74d0b">00078</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> IPath <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af51571e2c282dc955d763c8aa6d74d0b">JUNIT_SRC</a>= <span class="keyword">new</span> Path(<span class="stringliteral">&quot;testresources/junit37-noUI-src.zip&quot;</span>);
<a name="l00079"></a>00079      
<a name="l00080"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab9682099e6b3300bd32cf650a6bb9b8a">00080</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> IPath <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab9682099e6b3300bd32cf650a6bb9b8a">RT_STUBS_15</a>= <span class="keyword">new</span> Path(<span class="stringliteral">&quot;testresources/rtstubs15.jar&quot;</span>);
<a name="l00081"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a31fe8a61eb699994d99273c9d3996172">00081</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> IPath <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a31fe8a61eb699994d99273c9d3996172">JUNIT_SRC_381</a>= <span class="keyword">new</span> Path(<span class="stringliteral">&quot;testresources/junit381-noUI-src.zip&quot;</span>);
<a name="l00082"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a4800d44dacf636af372611d1ffb6d8a1">00082</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a4800d44dacf636af372611d1ffb6d8a1">JUNIT_SRC_ENCODING</a>= <span class="stringliteral">&quot;ISO-8859-1&quot;</span>;
<a name="l00083"></a>00083      
<a name="l00084"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#aaf4b86adc0576d9e3eba268ab1afee22">00084</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> IPath <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#aaf4b86adc0576d9e3eba268ab1afee22">MYLIB</a>= <span class="keyword">new</span> Path(<span class="stringliteral">&quot;testresources/mylib.jar&quot;</span>);
<a name="l00085"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab065fefae002b3356342e1ff056da45c">00085</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> IPath <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab065fefae002b3356342e1ff056da45c">NLS_LIB</a>= <span class="keyword">new</span> Path(<span class="stringliteral">&quot;testresources/nls.jar&quot;</span>);
<a name="l00086"></a>00086      
<a name="l00087"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8b45a289f9403a104b4262a119f82351">00087</a>      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8b45a289f9403a104b4262a119f82351">MAX_RETRY</a>= 5;
<a name="l00088"></a>00088      
<a name="l00089"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#aabe3ec975531ede97506dc8840f50c1e">00089</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#aabe3ec975531ede97506dc8840f50c1e">COUNT_CLASSES_RT_STUBS_15</a>= 661;
<a name="l00090"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ada6902cb610a070f60612b3ae068f626">00090</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ada6902cb610a070f60612b3ae068f626">COUNT_INTERFACES_RT_STUBS_15</a>= 135;
<a name="l00091"></a>00091      
<a name="l00092"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af0167a048adf755595853c19ef30b60d">00092</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af0167a048adf755595853c19ef30b60d">COUNT_CLASSES_JUNIT_SRC_381</a>= 76;
<a name="l00093"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a23d9cfacb334a7bded4ec4295b154352">00093</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a23d9cfacb334a7bded4ec4295b154352">COUNT_INTERFACES_JUNIT_SRC_381</a>= 8;
<a name="l00094"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0f75bcd17ac6c7fa55810a720858020a">00094</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0f75bcd17ac6c7fa55810a720858020a">COUNT_CLASSES_MYLIB</a>= 3;
<a name="l00095"></a>00095      
<a name="l00106"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ae1a510c7b10dbf64cd95cc379d58a350">00106</a>      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ae1a510c7b10dbf64cd95cc379d58a350">ASSERT_NO_MIXED_LINE_DELIMIERS</a>= <span class="keyword">false</span>;
<a name="l00107"></a>00107           
<a name="l00115"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8b7b9e680b2757f0cf2dbed6972422e8">00115</a>      <span class="keyword">public</span> <span class="keyword">static</span> IJavaProject <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8b7b9e680b2757f0cf2dbed6972422e8">createJavaProject</a>(String projectName, String binFolderName) <span class="keywordflow">throws</span> CoreException {
<a name="l00116"></a>00116           IWorkspaceRoot root= ResourcesPlugin.getWorkspace().getRoot();
<a name="l00117"></a>00117           IProject project= root.getProject(projectName);
<a name="l00118"></a>00118           <span class="keywordflow">if</span> (!project.exists()) {
<a name="l00119"></a>00119                project.create(null);
<a name="l00120"></a>00120           } <span class="keywordflow">else</span> {
<a name="l00121"></a>00121                project.refreshLocal(IResource.DEPTH_INFINITE, null);
<a name="l00122"></a>00122           }
<a name="l00123"></a>00123           
<a name="l00124"></a>00124           <span class="keywordflow">if</span> (!project.isOpen()) {
<a name="l00125"></a>00125                project.open(null);
<a name="l00126"></a>00126           }
<a name="l00127"></a>00127           
<a name="l00128"></a>00128           IPath outputLocation;
<a name="l00129"></a>00129           <span class="keywordflow">if</span> (binFolderName != null &amp;&amp; binFolderName.length() &gt; 0) {
<a name="l00130"></a>00130                IFolder binFolder= project.getFolder(binFolderName);
<a name="l00131"></a>00131                <span class="keywordflow">if</span> (!binFolder.exists()) {
<a name="l00132"></a>00132                     CoreUtility.createFolder(binFolder, <span class="keyword">false</span>, <span class="keyword">true</span>, null);
<a name="l00133"></a>00133                }
<a name="l00134"></a>00134                outputLocation= binFolder.getFullPath();
<a name="l00135"></a>00135           } <span class="keywordflow">else</span> {
<a name="l00136"></a>00136                outputLocation= project.getFullPath();
<a name="l00137"></a>00137           }
<a name="l00138"></a>00138           
<a name="l00139"></a>00139           <span class="keywordflow">if</span> (!project.hasNature(JavaCore.NATURE_ID)) {
<a name="l00140"></a>00140                <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3c33aa465ac14609504c8c7a013c36b7">addNatureToProject</a>(project, JavaCore.NATURE_ID, null);
<a name="l00141"></a>00141           }
<a name="l00142"></a>00142           
<a name="l00143"></a>00143           IJavaProject jproject= JavaCore.create(project);
<a name="l00144"></a>00144           
<a name="l00145"></a>00145           jproject.setOutputLocation(outputLocation, null);
<a name="l00146"></a>00146           jproject.setRawClasspath(<span class="keyword">new</span> IClasspathEntry[0], null);
<a name="l00147"></a>00147           
<a name="l00148"></a>00148           <span class="keywordflow">return</span> jproject;    
<a name="l00149"></a>00149      }
<a name="l00150"></a>00150      
<a name="l00164"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3b76ed2e1cd6b7e11fec59ba4e60b04b">00164</a>      <span class="keyword">public</span> <span class="keyword">static</span> IJavaProject <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3b76ed2e1cd6b7e11fec59ba4e60b04b">createJavaProjectWithJUnitSource</a>(String projectName, String srcContainerName, String outputFolderName) <span class="keywordflow">throws</span> CoreException, IOException, InvocationTargetException {
<a name="l00165"></a>00165           IJavaProject project= <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8b7b9e680b2757f0cf2dbed6972422e8">createJavaProject</a>(projectName, outputFolderName); <span class="comment">//$NON-NLS-2$</span>
<a name="l00166"></a>00166           
<a name="l00167"></a>00167           IPackageFragmentRoot jdk= <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html">JavaProjectHelper</a>.<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af1d1929b81b3bfe9239d1fa08fd1be55">addVariableRTJar</a>(project, <span class="stringliteral">&quot;JRE_LIB_TEST&quot;</span>, null, null);<span class="comment">//$NON-NLS-1$</span>
<a name="l00168"></a>00168           Assert.assertNotNull(jdk);
<a name="l00169"></a>00169           
<a name="l00170"></a>00170           File junitSrcArchive= <a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html">Activator</a>.<a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html#ae746cfda566e60a2101ca003ab14ca20">getDefault</a>().<a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html#af85bffd533d8e740c3d0e9f80495f6e0">getFileInPlugin</a>(<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a31fe8a61eb699994d99273c9d3996172">JUNIT_SRC_381</a>);
<a name="l00171"></a>00171           Assert.assertTrue(junitSrcArchive != null &amp;&amp; junitSrcArchive.exists());
<a name="l00172"></a>00172           
<a name="l00173"></a>00173      <span class="comment">//   JavaProjectHelper.addSourceContainerWithImport(project, srcContainerName, junitSrcArchive, JUNIT_SRC_ENCODING);</span>
<a name="l00174"></a>00174           
<a name="l00175"></a>00175           <span class="keywordflow">return</span> project;
<a name="l00176"></a>00176      }
<a name="l00177"></a>00177      
<a name="l00182"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a1aa1a0ef7d7adba1862ba8bc6254baa2">00182</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a1aa1a0ef7d7adba1862ba8bc6254baa2">set15CompilerOptions</a>(IJavaProject project) {
<a name="l00183"></a>00183           Map options= project.getOptions(<span class="keyword">false</span>);
<a name="l00184"></a>00184           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html">JavaProjectHelper</a>.<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a1aa1a0ef7d7adba1862ba8bc6254baa2">set15CompilerOptions</a>(options);
<a name="l00185"></a>00185           project.setOptions(options);
<a name="l00186"></a>00186      }
<a name="l00187"></a>00187      
<a name="l00192"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0ac66e905c063a83ad51194c310f1e6a">00192</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0ac66e905c063a83ad51194c310f1e6a">set14CompilerOptions</a>(IJavaProject project) {
<a name="l00193"></a>00193           Map options= project.getOptions(<span class="keyword">false</span>);
<a name="l00194"></a>00194           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html">JavaProjectHelper</a>.<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0ac66e905c063a83ad51194c310f1e6a">set14CompilerOptions</a>(options);
<a name="l00195"></a>00195           project.setOptions(options);
<a name="l00196"></a>00196      }
<a name="l00197"></a>00197      
<a name="l00202"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8e1c9f655eb4dd2dd754dc04e0b1c5fd">00202</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8e1c9f655eb4dd2dd754dc04e0b1c5fd">set15CompilerOptions</a>(Map options) {
<a name="l00203"></a>00203           options.put(JavaCore.COMPILER_COMPLIANCE, JavaCore.VERSION_1_5);
<a name="l00204"></a>00204           options.put(JavaCore.COMPILER_PB_ASSERT_IDENTIFIER, JavaCore.ERROR);
<a name="l00205"></a>00205           options.put(JavaCore.COMPILER_PB_ENUM_IDENTIFIER, JavaCore.ERROR);
<a name="l00206"></a>00206           options.put(JavaCore.COMPILER_SOURCE, JavaCore.VERSION_1_5);
<a name="l00207"></a>00207           options.put(JavaCore.COMPILER_CODEGEN_TARGET_PLATFORM, JavaCore.VERSION_1_5);
<a name="l00208"></a>00208      }
<a name="l00209"></a>00209      
<a name="l00214"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a83b10b111cb7702370fb6581219c9417">00214</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a83b10b111cb7702370fb6581219c9417">set14CompilerOptions</a>(Map options) {
<a name="l00215"></a>00215           options.put(JavaCore.COMPILER_COMPLIANCE, JavaCore.VERSION_1_4);
<a name="l00216"></a>00216           options.put(JavaCore.COMPILER_PB_ASSERT_IDENTIFIER, JavaCore.ERROR);
<a name="l00217"></a>00217           options.put(JavaCore.COMPILER_PB_ENUM_IDENTIFIER, JavaCore.WARNING);
<a name="l00218"></a>00218           options.put(JavaCore.COMPILER_SOURCE, JavaCore.VERSION_1_3);
<a name="l00219"></a>00219           options.put(JavaCore.COMPILER_CODEGEN_TARGET_PLATFORM, JavaCore.VERSION_1_2);
<a name="l00220"></a>00220      }
<a name="l00221"></a>00221      
<a name="l00226"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a97c8f1ec5471ba53d2a6ed372ffda525">00226</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a97c8f1ec5471ba53d2a6ed372ffda525">set13CompilerOptions</a>(Map options) {
<a name="l00227"></a>00227           options.put(JavaCore.COMPILER_COMPLIANCE, JavaCore.VERSION_1_3);
<a name="l00228"></a>00228           options.put(JavaCore.COMPILER_PB_ASSERT_IDENTIFIER, JavaCore.WARNING);
<a name="l00229"></a>00229           options.put(JavaCore.COMPILER_PB_ENUM_IDENTIFIER, JavaCore.WARNING);
<a name="l00230"></a>00230           options.put(JavaCore.COMPILER_SOURCE, JavaCore.VERSION_1_3);
<a name="l00231"></a>00231           options.put(JavaCore.COMPILER_CODEGEN_TARGET_PLATFORM, JavaCore.VERSION_1_2);
<a name="l00232"></a>00232      }
<a name="l00233"></a>00233      
<a name="l00241"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a5e54a9c4511173e7739ce8e809c325c9">00241</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">delete</span>(<span class="keyword">final</span> IJavaElement elem) <span class="keywordflow">throws</span> CoreException {
<a name="l00242"></a>00242           <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ae1a510c7b10dbf64cd95cc379d58a350">ASSERT_NO_MIXED_LINE_DELIMIERS</a>)
<a name="l00243"></a>00243                <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1MixedLineDelimiterDetector.html">MixedLineDelimiterDetector</a>.<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1MixedLineDelimiterDetector.html#ac45a53cb1e86a3786308742265715c03">assertNoMixedLineDelimiters</a>(elem);
<a name="l00244"></a>00244           
<a name="l00245"></a>00245           IWorkspaceRunnable runnable= <span class="keyword">new</span> IWorkspaceRunnable() {
<a name="l00246"></a>00246                <span class="keyword">public</span> <span class="keywordtype">void</span> run(IProgressMonitor monitor) <span class="keywordflow">throws</span> CoreException {
<a name="l00247"></a>00247                     <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0e82eb3a6de8503e44d0a1775fb9623d">performDummySearch</a>();
<a name="l00248"></a>00248                     <span class="keywordflow">if</span> (elem instanceof IJavaProject) {
<a name="l00249"></a>00249                          IJavaProject jproject= (IJavaProject) elem;
<a name="l00250"></a>00250                          jproject.setRawClasspath(<span class="keyword">new</span> IClasspathEntry[0], jproject.getProject().getFullPath(), null);
<a name="l00251"></a>00251                     }
<a name="l00252"></a>00252                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8b45a289f9403a104b4262a119f82351">MAX_RETRY</a>; i++) {
<a name="l00253"></a>00253                          <span class="keywordflow">try</span> {
<a name="l00254"></a>00254                               elem.getResource().delete(<span class="keyword">true</span>, null);
<a name="l00255"></a>00255                               i= <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8b45a289f9403a104b4262a119f82351">MAX_RETRY</a>;
<a name="l00256"></a>00256                          } <span class="keywordflow">catch</span> (CoreException e) {
<a name="l00257"></a>00257                               <span class="keywordflow">if</span> (i == MAX_RETRY - 1) {
<a name="l00258"></a>00258                                    JavaPlugin.log(e);
<a name="l00259"></a>00259                                    <span class="keywordflow">throw</span> e;
<a name="l00260"></a>00260                               }
<a name="l00261"></a>00261                               <span class="keywordflow">try</span> {
<a name="l00262"></a>00262                                    Thread.sleep(1000); <span class="comment">// sleep a second</span>
<a name="l00263"></a>00263                               } <span class="keywordflow">catch</span> (InterruptedException e1) {
<a name="l00264"></a>00264                               } 
<a name="l00265"></a>00265                          }
<a name="l00266"></a>00266                     }
<a name="l00267"></a>00267                }
<a name="l00268"></a>00268           };
<a name="l00269"></a>00269           ResourcesPlugin.getWorkspace().run(runnable, null);    
<a name="l00270"></a>00270           
<a name="l00271"></a>00271      }
<a name="l00272"></a>00272 
<a name="l00279"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a5a34fceaddd0e5312f04f4bfe6f1ed3c">00279</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a5a34fceaddd0e5312f04f4bfe6f1ed3c">clear</a>(<span class="keyword">final</span> IJavaProject jproject, <span class="keyword">final</span> IClasspathEntry[] entries) <span class="keywordflow">throws</span> CoreException {
<a name="l00280"></a>00280           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0e82eb3a6de8503e44d0a1775fb9623d">performDummySearch</a>();
<a name="l00281"></a>00281           
<a name="l00282"></a>00282           IWorkspaceRunnable runnable= <span class="keyword">new</span> IWorkspaceRunnable() {
<a name="l00283"></a>00283                <span class="keyword">public</span> <span class="keywordtype">void</span> run(IProgressMonitor monitor) <span class="keywordflow">throws</span> CoreException {
<a name="l00284"></a>00284                     jproject.setRawClasspath(entries, null);
<a name="l00285"></a>00285           
<a name="l00286"></a>00286                     IResource[] resources= jproject.getProject().members();
<a name="l00287"></a>00287                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; resources.length; i++) {
<a name="l00288"></a>00288                          <span class="keywordflow">if</span> (!resources[i].getName().startsWith(<span class="stringliteral">&quot;.&quot;</span>)) {
<a name="l00289"></a>00289                               resources[i].delete(<span class="keyword">true</span>, null);
<a name="l00290"></a>00290                          }
<a name="l00291"></a>00291                     }
<a name="l00292"></a>00292                }
<a name="l00293"></a>00293           };
<a name="l00294"></a>00294           ResourcesPlugin.getWorkspace().run(runnable, null);
<a name="l00295"></a>00295      }
<a name="l00296"></a>00296      
<a name="l00297"></a>00297 
<a name="l00298"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0e82eb3a6de8503e44d0a1775fb9623d">00298</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a0e82eb3a6de8503e44d0a1775fb9623d">performDummySearch</a>() throws JavaModelException {
<a name="l00299"></a>00299           <span class="keyword">new</span> SearchEngine().searchAllTypeNames(
<a name="l00300"></a>00300                     null,
<a name="l00301"></a>00301                     SearchPattern.R_EXACT_MATCH,
<a name="l00302"></a>00302                     <span class="stringliteral">&quot;XXXXXXXXX&quot;</span>.toCharArray(), <span class="comment">// make sure we search a concrete name. This is faster according to Kent </span>
<a name="l00303"></a>00303                     SearchPattern.R_EXACT_MATCH | SearchPattern.R_CASE_SENSITIVE,
<a name="l00304"></a>00304                     IJavaSearchConstants.CLASS,
<a name="l00305"></a>00305                     SearchEngine.createJavaSearchScope(<span class="keyword">new</span> IJavaElement[0]),
<a name="l00306"></a>00306                     <span class="keyword">new</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper_1_1Requestor.html">Requestor</a>(),
<a name="l00307"></a>00307                     IJavaSearchConstants.WAIT_UNTIL_READY_TO_SEARCH,
<a name="l00308"></a>00308                     null);
<a name="l00309"></a>00309      }
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 
<a name="l00319"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8008eaafbd39eb06ab3c6b874ebd9484">00319</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8008eaafbd39eb06ab3c6b874ebd9484">addSourceContainer</a>(IJavaProject jproject, String containerName) <span class="keywordflow">throws</span> CoreException {
<a name="l00320"></a>00320           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8008eaafbd39eb06ab3c6b874ebd9484">addSourceContainer</a>(jproject, containerName, <span class="keyword">new</span> Path[0]);
<a name="l00321"></a>00321      }
<a name="l00322"></a>00322 
<a name="l00331"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ace1239a14d7b65c4287fa93bcf59e76c">00331</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ace1239a14d7b65c4287fa93bcf59e76c">addSourceContainer</a>(IJavaProject jproject, String containerName, IPath[] exclusionFilters) <span class="keywordflow">throws</span> CoreException {
<a name="l00332"></a>00332           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8008eaafbd39eb06ab3c6b874ebd9484">addSourceContainer</a>(jproject, containerName, <span class="keyword">new</span> Path[0], exclusionFilters);
<a name="l00333"></a>00333      }
<a name="l00334"></a>00334      
<a name="l00344"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a82d933ec9c5428ddbfd959164c55639a">00344</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a82d933ec9c5428ddbfd959164c55639a">addSourceContainer</a>(IJavaProject jproject, String containerName, IPath[] inclusionFilters, IPath[] exclusionFilters) <span class="keywordflow">throws</span> CoreException {
<a name="l00345"></a>00345           IProject project= jproject.getProject();
<a name="l00346"></a>00346           IContainer container= null;
<a name="l00347"></a>00347           <span class="keywordflow">if</span> (containerName == null || containerName.length() == 0) {
<a name="l00348"></a>00348                container= project;
<a name="l00349"></a>00349           } <span class="keywordflow">else</span> {
<a name="l00350"></a>00350                IFolder folder= project.getFolder(containerName);
<a name="l00351"></a>00351                <span class="keywordflow">if</span> (!folder.exists()) {
<a name="l00352"></a>00352                     CoreUtility.createFolder(folder, <span class="keyword">false</span>, <span class="keyword">true</span>, null);
<a name="l00353"></a>00353                }
<a name="l00354"></a>00354                container= folder;
<a name="l00355"></a>00355           }
<a name="l00356"></a>00356           IPackageFragmentRoot root= jproject.getPackageFragmentRoot(container);
<a name="l00357"></a>00357           
<a name="l00358"></a>00358           IClasspathEntry cpe= JavaCore.newSourceEntry(root.getPath(), inclusionFilters, exclusionFilters, null);
<a name="l00359"></a>00359           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#acb2cb3f2f31117a9663e43d3e5f2dea4">addToClasspath</a>(jproject, cpe);          
<a name="l00360"></a>00360           <span class="keywordflow">return</span> root;
<a name="l00361"></a>00361      }
<a name="l00362"></a>00362      
<a name="l00375"></a>00375 <span class="comment">//   public static IPackageFragmentRoot addSourceContainerWithImport(IJavaProject jproject, String containerName, File zipFile, String containerEncoding) throws InvocationTargetException, CoreException, IOException {</span>
<a name="l00376"></a>00376 <span class="comment">//   //   return addSourceContainerWithImport(jproject, containerName, zipFile, containerEncoding, new Path[0]);</span>
<a name="l00377"></a>00377 <span class="comment">//   }    </span>
<a name="l00378"></a>00378 
<a name="l00392"></a>00392 <span class="comment">//   public static IPackageFragmentRoot addSourceContainerWithImport(IJavaProject jproject, String containerName, File zipFile, String containerEncoding, IPath[] exclusionFilters) throws InvocationTargetException, CoreException, IOException {</span>
<a name="l00393"></a>00393 <span class="comment">//        ZipFile file= new ZipFile(zipFile);</span>
<a name="l00394"></a>00394 <span class="comment">//        try {</span>
<a name="l00395"></a>00395 <span class="comment">//             IPackageFragmentRoot root= addSourceContainer(jproject, containerName, exclusionFilters);</span>
<a name="l00396"></a>00396 <span class="comment">//             ((IContainer) root.getCorrespondingResource()).setDefaultCharset(containerEncoding, null);</span>
<a name="l00397"></a>00397 <span class="comment">//             importFilesFromZip(file, root.getPath(), null);</span>
<a name="l00398"></a>00398 <span class="comment">//             return root;</span>
<a name="l00399"></a>00399 <span class="comment">//        } finally {</span>
<a name="l00400"></a>00400 <span class="comment">//             if (file != null) {</span>
<a name="l00401"></a>00401 <span class="comment">//                  file.close();</span>
<a name="l00402"></a>00402 <span class="comment">//             }</span>
<a name="l00403"></a>00403 <span class="comment">//        }</span>
<a name="l00404"></a>00404 <span class="comment">//   }</span>
<a name="l00405"></a>00405 
<a name="l00412"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a4175c17b9c618d32ec2971208da64e44">00412</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a4175c17b9c618d32ec2971208da64e44">removeSourceContainer</a>(IJavaProject jproject, String containerName) <span class="keywordflow">throws</span> CoreException {
<a name="l00413"></a>00413           IFolder folder= jproject.getProject().getFolder(containerName);
<a name="l00414"></a>00414           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab75bf11f00d22be3e81050263a30f7a1">removeFromClasspath</a>(jproject, folder.getFullPath());
<a name="l00415"></a>00415           folder.delete(<span class="keyword">true</span>, null);
<a name="l00416"></a>00416      }
<a name="l00417"></a>00417 
<a name="l00425"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ad5f22d81a4e9791fbdd1aae0f2d10944">00425</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ad5f22d81a4e9791fbdd1aae0f2d10944">addLibrary</a>(IJavaProject jproject, IPath path) <span class="keywordflow">throws</span> JavaModelException {
<a name="l00426"></a>00426           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ad5f22d81a4e9791fbdd1aae0f2d10944">addLibrary</a>(jproject, path, null, null);
<a name="l00427"></a>00427      }
<a name="l00428"></a>00428 
<a name="l00438"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a82fc7893776a175c970887bc7323e31f">00438</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a82fc7893776a175c970887bc7323e31f">addLibrary</a>(IJavaProject jproject, IPath path, IPath sourceAttachPath, IPath sourceAttachRoot) <span class="keywordflow">throws</span> JavaModelException {
<a name="l00439"></a>00439           IClasspathEntry cpe= JavaCore.newLibraryEntry(path, sourceAttachPath, sourceAttachRoot);
<a name="l00440"></a>00440           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#acb2cb3f2f31117a9663e43d3e5f2dea4">addToClasspath</a>(jproject, cpe);
<a name="l00441"></a>00441           <span class="keywordflow">return</span> jproject.getPackageFragmentRoot(path.toString());
<a name="l00442"></a>00442      }
<a name="l00443"></a>00443      
<a name="l00444"></a>00444 
<a name="l00455"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a20d5c750bf46195dc94e15790258fa92">00455</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a20d5c750bf46195dc94e15790258fa92">addLibraryWithImport</a>(IJavaProject jproject, IPath jarPath, IPath sourceAttachPath, IPath sourceAttachRoot) <span class="keywordflow">throws</span> IOException, CoreException {
<a name="l00456"></a>00456           IProject project= jproject.getProject();
<a name="l00457"></a>00457           IFile newFile= project.getFile(jarPath.lastSegment());
<a name="l00458"></a>00458           InputStream inputStream= null;
<a name="l00459"></a>00459           <span class="keywordflow">try</span> {
<a name="l00460"></a>00460                inputStream= <span class="keyword">new</span> FileInputStream(jarPath.toFile()); 
<a name="l00461"></a>00461                newFile.create(inputStream, <span class="keyword">true</span>, null);
<a name="l00462"></a>00462           } <span class="keywordflow">finally</span> {
<a name="l00463"></a>00463                <span class="keywordflow">if</span> (inputStream != null) {
<a name="l00464"></a>00464                     <span class="keywordflow">try</span> { inputStream.close(); } <span class="keywordflow">catch</span> (IOException e) { }
<a name="l00465"></a>00465                }
<a name="l00466"></a>00466           }                   
<a name="l00467"></a>00467           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ad5f22d81a4e9791fbdd1aae0f2d10944">addLibrary</a>(jproject, newFile.getFullPath(), sourceAttachPath, sourceAttachRoot);
<a name="l00468"></a>00468      }    
<a name="l00469"></a>00469 
<a name="l00479"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a47c45b1af3293b1f5db87cce3b892152">00479</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a47c45b1af3293b1f5db87cce3b892152">addClassFolder</a>(IJavaProject jproject, String containerName, IPath sourceAttachPath, IPath sourceAttachRoot) <span class="keywordflow">throws</span> CoreException {
<a name="l00480"></a>00480           IProject project= jproject.getProject();
<a name="l00481"></a>00481           IContainer container= null;
<a name="l00482"></a>00482           <span class="keywordflow">if</span> (containerName == null || containerName.length() == 0) {
<a name="l00483"></a>00483                container= project;
<a name="l00484"></a>00484           } <span class="keywordflow">else</span> {
<a name="l00485"></a>00485                IFolder folder= project.getFolder(containerName);
<a name="l00486"></a>00486                <span class="keywordflow">if</span> (!folder.exists()) {
<a name="l00487"></a>00487                     CoreUtility.createFolder(folder, <span class="keyword">false</span>, <span class="keyword">true</span>, null);
<a name="l00488"></a>00488                }
<a name="l00489"></a>00489                container= folder;
<a name="l00490"></a>00490           }
<a name="l00491"></a>00491           IClasspathEntry cpe= JavaCore.newLibraryEntry(container.getFullPath(), sourceAttachPath, sourceAttachRoot);
<a name="l00492"></a>00492           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#acb2cb3f2f31117a9663e43d3e5f2dea4">addToClasspath</a>(jproject, cpe);
<a name="l00493"></a>00493           <span class="keywordflow">return</span> jproject.getPackageFragmentRoot(container);
<a name="l00494"></a>00494      }
<a name="l00495"></a>00495 
<a name="l00509"></a>00509 <span class="comment">//   public static IPackageFragmentRoot addClassFolderWithImport(IJavaProject jproject, String containerName, IPath sourceAttachPath, IPath sourceAttachRoot, File zipFile) throws IOException, CoreException, InvocationTargetException {</span>
<a name="l00510"></a>00510 <span class="comment">//        ZipFile file= new ZipFile(zipFile);</span>
<a name="l00511"></a>00511 <span class="comment">//        try {</span>
<a name="l00512"></a>00512 <span class="comment">//             IPackageFragmentRoot root= addClassFolder(jproject, containerName, sourceAttachPath, sourceAttachRoot);</span>
<a name="l00513"></a>00513 <span class="comment">//             importFilesFromZip(file, root.getPath(), null);</span>
<a name="l00514"></a>00514 <span class="comment">//             return root;</span>
<a name="l00515"></a>00515 <span class="comment">//        } finally {</span>
<a name="l00516"></a>00516 <span class="comment">//             if (file != null) {</span>
<a name="l00517"></a>00517 <span class="comment">//                  file.close();</span>
<a name="l00518"></a>00518 <span class="comment">//             }</span>
<a name="l00519"></a>00519 <span class="comment">//        }</span>
<a name="l00520"></a>00520 <span class="comment">//   }    </span>
<a name="l00521"></a>00521 
<a name="l00531"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#abb71254ee77bb408bcc8548cbff929d4">00531</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#abb71254ee77bb408bcc8548cbff929d4">addRTJar</a>(IJavaProject jproject) <span class="keywordflow">throws</span> CoreException {
<a name="l00532"></a>00532           IPath[] rtJarPath= <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ac1bceee3b24e6bfbc268488ab6a32b57">findRtJar</a>(<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab9682099e6b3300bd32cf650a6bb9b8a">RT_STUBS_15</a>);
<a name="l00533"></a>00533           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a1aa1a0ef7d7adba1862ba8bc6254baa2">set15CompilerOptions</a>(jproject);
<a name="l00534"></a>00534           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ad5f22d81a4e9791fbdd1aae0f2d10944">addLibrary</a>(jproject, rtJarPath[0], rtJarPath[1], rtJarPath[2]);
<a name="l00535"></a>00535      }
<a name="l00536"></a>00536      
<a name="l00537"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a5aa5a608ebe3f6166d0602cff8f0b287">00537</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a5aa5a608ebe3f6166d0602cff8f0b287">addRTJar13</a>(IJavaProject jproject) <span class="keywordflow">throws</span> CoreException {
<a name="l00538"></a>00538           IPath[] rtJarPath= <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ac1bceee3b24e6bfbc268488ab6a32b57">findRtJar</a>(<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a25c1dc7863be515c696975db13e6908e">RT_STUBS_13</a>);
<a name="l00539"></a>00539           
<a name="l00540"></a>00540           Map options= jproject.getOptions(<span class="keyword">false</span>);
<a name="l00541"></a>00541           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html">JavaProjectHelper</a>.<a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a97c8f1ec5471ba53d2a6ed372ffda525">set13CompilerOptions</a>(options);
<a name="l00542"></a>00542           jproject.setOptions(options);
<a name="l00543"></a>00543           
<a name="l00544"></a>00544           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ad5f22d81a4e9791fbdd1aae0f2d10944">addLibrary</a>(jproject, rtJarPath[0], rtJarPath[1], rtJarPath[2]);
<a name="l00545"></a>00545      }
<a name="l00546"></a>00546      
<a name="l00557"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a7e6b8708c3654735401aada6361bf128">00557</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a7e6b8708c3654735401aada6361bf128">addVariableEntry</a>(IJavaProject jproject, IPath path, IPath sourceAttachPath, IPath sourceAttachRoot) <span class="keywordflow">throws</span> JavaModelException {
<a name="l00558"></a>00558           IClasspathEntry cpe= JavaCore.newVariableEntry(path, sourceAttachPath, sourceAttachRoot);
<a name="l00559"></a>00559           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#acb2cb3f2f31117a9663e43d3e5f2dea4">addToClasspath</a>(jproject, cpe);
<a name="l00560"></a>00560           IPath resolvedPath= JavaCore.getResolvedVariablePath(path);
<a name="l00561"></a>00561           <span class="keywordflow">if</span> (resolvedPath != null) {
<a name="l00562"></a>00562                <span class="keywordflow">return</span> jproject.getPackageFragmentRoot(resolvedPath.toString());
<a name="l00563"></a>00563           }
<a name="l00564"></a>00564           <span class="keywordflow">return</span> null;
<a name="l00565"></a>00565      }
<a name="l00566"></a>00566      
<a name="l00567"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a252762e5a7a167af5ed1daef48c2b44f">00567</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a252762e5a7a167af5ed1daef48c2b44f">addVariableRTJar13</a>(IJavaProject jproject, String libVarName, String srcVarName, String srcrootVarName) <span class="keywordflow">throws</span> CoreException {
<a name="l00568"></a>00568           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af1d1929b81b3bfe9239d1fa08fd1be55">addVariableRTJar</a>(jproject, <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a25c1dc7863be515c696975db13e6908e">RT_STUBS_13</a>, libVarName, srcVarName, srcrootVarName);
<a name="l00569"></a>00569      }
<a name="l00570"></a>00570      
<a name="l00584"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af1d1929b81b3bfe9239d1fa08fd1be55">00584</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af1d1929b81b3bfe9239d1fa08fd1be55">addVariableRTJar</a>(IJavaProject jproject, String libVarName, String srcVarName, String srcrootVarName) <span class="keywordflow">throws</span> CoreException {
<a name="l00585"></a>00585           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#af1d1929b81b3bfe9239d1fa08fd1be55">addVariableRTJar</a>(jproject, <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab9682099e6b3300bd32cf650a6bb9b8a">RT_STUBS_15</a>, libVarName, srcVarName, srcrootVarName);
<a name="l00586"></a>00586      }
<a name="l00587"></a>00587      
<a name="l00601"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab0a541cfde36b441aa12978bc895e346">00601</a>      <span class="keyword">private</span> <span class="keyword">static</span> IPackageFragmentRoot <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab0a541cfde36b441aa12978bc895e346">addVariableRTJar</a>(IJavaProject jproject, IPath rtStubsPath, String libVarName, String srcVarName, String srcrootVarName) <span class="keywordflow">throws</span> CoreException {
<a name="l00602"></a>00602           IPath[] rtJarPaths= <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ac1bceee3b24e6bfbc268488ab6a32b57">findRtJar</a>(rtStubsPath);
<a name="l00603"></a>00603           IPath libVarPath= <span class="keyword">new</span> Path(libVarName);
<a name="l00604"></a>00604           IPath srcVarPath= null;
<a name="l00605"></a>00605           IPath srcrootVarPath= null;
<a name="l00606"></a>00606           JavaCore.setClasspathVariable(libVarName, rtJarPaths[0], null);
<a name="l00607"></a>00607           <span class="keywordflow">if</span> (srcVarName != null) {
<a name="l00608"></a>00608                IPath varValue= rtJarPaths[1] != null ? rtJarPaths[1] : Path.EMPTY;
<a name="l00609"></a>00609                JavaCore.setClasspathVariable(srcVarName, varValue, null);
<a name="l00610"></a>00610                srcVarPath= <span class="keyword">new</span> Path(srcVarName);
<a name="l00611"></a>00611           }
<a name="l00612"></a>00612           <span class="keywordflow">if</span> (srcrootVarName != null) {
<a name="l00613"></a>00613                IPath varValue= rtJarPaths[2] != null ? rtJarPaths[2] : Path.EMPTY;
<a name="l00614"></a>00614                JavaCore.setClasspathVariable(srcrootVarName, varValue, null);
<a name="l00615"></a>00615                srcrootVarPath= <span class="keyword">new</span> Path(srcrootVarName);
<a name="l00616"></a>00616           }
<a name="l00617"></a>00617           <span class="keywordflow">return</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a7e6b8708c3654735401aada6361bf128">addVariableEntry</a>(jproject, libVarPath, srcVarPath, srcrootVarPath);
<a name="l00618"></a>00618      }    
<a name="l00619"></a>00619 
<a name="l00626"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8a4fbd1681cc573e31464659185436a7">00626</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a8a4fbd1681cc573e31464659185436a7">addRequiredProject</a>(IJavaProject jproject, IJavaProject required) <span class="keywordflow">throws</span> JavaModelException {
<a name="l00627"></a>00627           IClasspathEntry cpe= JavaCore.newProjectEntry(required.getProject().getFullPath());
<a name="l00628"></a>00628           <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#acb2cb3f2f31117a9663e43d3e5f2dea4">addToClasspath</a>(jproject, cpe);
<a name="l00629"></a>00629      }    
<a name="l00630"></a>00630      
<a name="l00631"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab75bf11f00d22be3e81050263a30f7a1">00631</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ab75bf11f00d22be3e81050263a30f7a1">removeFromClasspath</a>(IJavaProject jproject, IPath path) <span class="keywordflow">throws</span> JavaModelException {
<a name="l00632"></a>00632           IClasspathEntry[] oldEntries= jproject.getRawClasspath();
<a name="l00633"></a>00633           <span class="keywordtype">int</span> nEntries= oldEntries.length;
<a name="l00634"></a>00634           ArrayList list= <span class="keyword">new</span> ArrayList(nEntries);
<a name="l00635"></a>00635           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0 ; i &lt; nEntries ; i++) {
<a name="l00636"></a>00636                IClasspathEntry curr= oldEntries[i];
<a name="l00637"></a>00637                <span class="keywordflow">if</span> (!path.equals(curr.getPath())) {
<a name="l00638"></a>00638                     list.add(curr);               
<a name="l00639"></a>00639                }
<a name="l00640"></a>00640           }
<a name="l00641"></a>00641           IClasspathEntry[] newEntries= (IClasspathEntry[])list.toArray(<span class="keyword">new</span> IClasspathEntry[list.size()]);
<a name="l00642"></a>00642           jproject.setRawClasspath(newEntries, null);
<a name="l00643"></a>00643      }    
<a name="l00644"></a>00644 
<a name="l00651"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#aca056a0f02d0f464b7319c236786a30c">00651</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#aca056a0f02d0f464b7319c236786a30c">setAutoBuilding</a>(<span class="keywordtype">boolean</span> state) <span class="keywordflow">throws</span> CoreException {
<a name="l00652"></a>00652           <span class="comment">// disable auto build</span>
<a name="l00653"></a>00653           IWorkspace workspace= ResourcesPlugin.getWorkspace();
<a name="l00654"></a>00654           IWorkspaceDescription desc= workspace.getDescription();
<a name="l00655"></a>00655           <span class="keywordtype">boolean</span> result= desc.isAutoBuilding();
<a name="l00656"></a>00656           desc.setAutoBuilding(state);
<a name="l00657"></a>00657           workspace.setDescription(desc);
<a name="l00658"></a>00658           <span class="keywordflow">return</span> result;
<a name="l00659"></a>00659      }
<a name="l00660"></a>00660 
<a name="l00661"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#acb2cb3f2f31117a9663e43d3e5f2dea4">00661</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#acb2cb3f2f31117a9663e43d3e5f2dea4">addToClasspath</a>(IJavaProject jproject, IClasspathEntry cpe) <span class="keywordflow">throws</span> JavaModelException {
<a name="l00662"></a>00662           IClasspathEntry[] oldEntries= jproject.getRawClasspath();
<a name="l00663"></a>00663           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; oldEntries.length; i++) {
<a name="l00664"></a>00664                <span class="keywordflow">if</span> (oldEntries[i].equals(cpe)) {
<a name="l00665"></a>00665                     <span class="keywordflow">return</span>;
<a name="l00666"></a>00666                }
<a name="l00667"></a>00667           }
<a name="l00668"></a>00668           <span class="keywordtype">int</span> nEntries= oldEntries.length;
<a name="l00669"></a>00669           IClasspathEntry[] newEntries= <span class="keyword">new</span> IClasspathEntry[nEntries + 1];
<a name="l00670"></a>00670           System.arraycopy(oldEntries, 0, newEntries, 0, nEntries);
<a name="l00671"></a>00671           newEntries[nEntries]= cpe;
<a name="l00672"></a>00672           jproject.setRawClasspath(newEntries, null);
<a name="l00673"></a>00673      }
<a name="l00674"></a>00674      
<a name="l00680"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ac1bceee3b24e6bfbc268488ab6a32b57">00680</a>      <span class="keyword">public</span> <span class="keyword">static</span> IPath[] <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#ac1bceee3b24e6bfbc268488ab6a32b57">findRtJar</a>(IPath rtStubsPath) <span class="keywordflow">throws</span> CoreException {
<a name="l00681"></a>00681           File rtStubs= <a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html">Activator</a>.<a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html#ae746cfda566e60a2101ca003ab14ca20">getDefault</a>().<a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html#af85bffd533d8e740c3d0e9f80495f6e0">getFileInPlugin</a>(rtStubsPath);
<a name="l00682"></a>00682           Assert.assertNotNull(rtStubs);
<a name="l00683"></a>00683           Assert.assertTrue(rtStubs.exists());
<a name="l00684"></a>00684           <span class="keywordflow">return</span> <span class="keyword">new</span> IPath[] {
<a name="l00685"></a>00685                Path.fromOSString(rtStubs.getPath()),
<a name="l00686"></a>00686                null,
<a name="l00687"></a>00687                null
<a name="l00688"></a>00688           };
<a name="l00689"></a>00689      }
<a name="l00690"></a>00690      
<a name="l00691"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3c33aa465ac14609504c8c7a013c36b7">00691</a>      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3c33aa465ac14609504c8c7a013c36b7">addNatureToProject</a>(IProject proj, String natureId, IProgressMonitor monitor) <span class="keywordflow">throws</span> CoreException {
<a name="l00692"></a>00692           IProjectDescription description = proj.getDescription();
<a name="l00693"></a>00693           String[] prevNatures= description.getNatureIds();
<a name="l00694"></a>00694           String[] newNatures= <span class="keyword">new</span> String[prevNatures.length + 1];
<a name="l00695"></a>00695           System.arraycopy(prevNatures, 0, newNatures, 0, prevNatures.length);
<a name="l00696"></a>00696           newNatures[prevNatures.length]= natureId;
<a name="l00697"></a>00697           description.setNatureIds(newNatures);
<a name="l00698"></a>00698           proj.setDescription(description, monitor);
<a name="l00699"></a>00699      }
<a name="l00700"></a>00700      
<a name="l00701"></a>00701 <span class="comment">//   private static void importFilesFromZip(ZipFile srcZipFile, IPath destPath, IProgressMonitor monitor) throws InvocationTargetException {          </span>
<a name="l00702"></a>00702 <span class="comment">//        ZipFileStructureProvider structureProvider=  new ZipFileStructureProvider(srcZipFile);</span>
<a name="l00703"></a>00703 <span class="comment">//        try {</span>
<a name="l00704"></a>00704 <span class="comment">//             ImportOperation op= new ImportOperation(destPath, structureProvider.getRoot(), structureProvider, new ImportOverwriteQuery());</span>
<a name="l00705"></a>00705 <span class="comment">//             op.run(monitor);</span>
<a name="l00706"></a>00706 <span class="comment">//        } catch (InterruptedException e) {</span>
<a name="l00707"></a>00707 <span class="comment">//             // should not happen</span>
<a name="l00708"></a>00708 <span class="comment">//        }</span>
<a name="l00709"></a>00709 <span class="comment">//   }</span>
<a name="l00710"></a>00710      
<a name="l00720"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3fa084c31202066bae7e3139d5a47f41">00720</a>      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3fa084c31202066bae7e3139d5a47f41">importResources</a>(IContainer importTarget, String bundleSourcePath) <span class="keywordflow">throws</span> CoreException, IOException {
<a name="l00721"></a>00721           Enumeration entryPaths= <a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html">Activator</a>.<a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html#ae746cfda566e60a2101ca003ab14ca20">getDefault</a>().getBundle().getEntryPaths(bundleSourcePath);
<a name="l00722"></a>00722           <span class="keywordflow">while</span> (entryPaths.hasMoreElements()) {
<a name="l00723"></a>00723                String path= (String) entryPaths.nextElement();
<a name="l00724"></a>00724                IPath name= <span class="keyword">new</span> Path(path.substring(bundleSourcePath.length()));
<a name="l00725"></a>00725                <span class="keywordflow">if</span> (path.endsWith(<span class="stringliteral">&quot;/&quot;</span>)) {
<a name="l00726"></a>00726                     IFolder folder= importTarget.getFolder(name);
<a name="l00727"></a>00727                     folder.create(<span class="keyword">false</span>, <span class="keyword">true</span>, null);
<a name="l00728"></a>00728                     <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper.html#a3fa084c31202066bae7e3139d5a47f41">importResources</a>(folder, path);
<a name="l00729"></a>00729                } <span class="keywordflow">else</span> {
<a name="l00730"></a>00730                     URL url= <a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html">Activator</a>.<a class="code" href="classedu_1_1illinois_1_1canistelCassabanana_1_1tests_1_1Activator.html#ae746cfda566e60a2101ca003ab14ca20">getDefault</a>().getBundle().getEntry(path);
<a name="l00731"></a>00731                     IFile file= importTarget.getFile(name);
<a name="l00732"></a>00732                     file.create(url.openStream(), <span class="keyword">true</span>, null);
<a name="l00733"></a>00733                }
<a name="l00734"></a>00734           }
<a name="l00735"></a>00735      }
<a name="l00736"></a>00736 
<a name="l00737"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper_1_1ImportOverwriteQuery.html">00737</a>      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper_1_1ImportOverwriteQuery.html">ImportOverwriteQuery</a> <span class="keyword">implements</span> IOverwriteQuery {
<a name="l00738"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper_1_1ImportOverwriteQuery.html#ad1bbc8268e2b53f7fe6fadfb1ce54a49">00738</a>           <span class="keyword">public</span> String <a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper_1_1ImportOverwriteQuery.html#ad1bbc8268e2b53f7fe6fadfb1ce54a49">queryOverwrite</a>(String file) {
<a name="l00739"></a>00739                <span class="keywordflow">return</span> ALL;
<a name="l00740"></a>00740           }    
<a name="l00741"></a>00741      }         
<a name="l00742"></a>00742      
<a name="l00743"></a><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper_1_1Requestor.html">00743</a>      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classorg_1_1eclipse_1_1jdt_1_1ui_1_1tests_1_1refactoring_1_1infra_1_1JavaProjectHelper_1_1Requestor.html">Requestor</a> <span class="keyword">extends</span> TypeNameRequestor{
<a name="l00744"></a>00744      }
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="JavaProjectHelper_8java.html">JavaProjectHelper.java</a>      </li>
      <li class="footer">Generated on Sun Dec 11 2011 22:25:18 for Remove Duplicate Code From Constructors Refactoring (Test Suite) by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
